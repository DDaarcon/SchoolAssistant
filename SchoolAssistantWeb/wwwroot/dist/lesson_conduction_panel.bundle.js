"use strict";
(this["webpackChunkschoolassistant"] = this["webpackChunkschoolassistant"] || []).push([["lesson_conduction_panel"],{

/***/ "./React/lesson-conduction-panel/components/background-area.css":
/*!**********************************************************************!*\
  !*** ./React/lesson-conduction-panel/components/background-area.css ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./React/lesson-conduction-panel/lesson-conduction-panel.css":
/*!*******************************************************************!*\
  !*** ./React/lesson-conduction-panel/lesson-conduction-panel.css ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/components/anchor.css":
/*!*******************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/components/anchor.css ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/components/clock.css":
/*!******************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/components/clock.css ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/components/controls.css":
/*!*********************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/components/controls.css ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/components/info-row.css":
/*!*********************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/components/info-row.css ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/components/save-button.css":
/*!************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/components/save-button.css ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel-content-area/attendance-edition/attendance-edition.css":
/*!**********************************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel-content-area/attendance-edition/attendance-edition.css ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel-content-area/attendance-edition/attendance-entry.css":
/*!********************************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel-content-area/attendance-edition/attendance-entry.css ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel-content-area/giving-group-mark-page/giving-group-mark-page.css":
/*!******************************************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel-content-area/giving-group-mark-page/giving-group-mark-page.css ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel-content-area/giving-group-mark-page/student-mark-insertion-entry.css":
/*!************************************************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel-content-area/giving-group-mark-page/student-mark-insertion-entry.css ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel-content-area/giving-mark-page/giving-mark-page.css":
/*!******************************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel-content-area/giving-mark-page/giving-mark-page.css ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel-content-area/giving-mark-page/student-selection-entry.css":
/*!*************************************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel-content-area/giving-mark-page/student-selection-entry.css ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel-content-area/panel-content-area.css":
/*!***************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel-content-area/panel-content-area.css ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel.css":
/*!*******************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel.css ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./React/lesson-conduction-panel.ts":
/*!******************************************!*\
  !*** ./React/lesson-conduction-panel.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const lesson_conduction_panel_1 = __importDefault(__webpack_require__(/*! ./lesson-conduction-panel/lesson-conduction-panel */ "./React/lesson-conduction-panel/lesson-conduction-panel.tsx"));
globalThis.Components.LessonConductionPanel = lesson_conduction_panel_1.default;


/***/ }),

/***/ "./React/lesson-conduction-panel/components/background-area.tsx":
/*!**********************************************************************!*\
  !*** ./React/lesson-conduction-panel/components/background-area.tsx ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const toggle_panel_service_1 = __importDefault(__webpack_require__(/*! ../services/toggle-panel-service */ "./React/lesson-conduction-panel/services/toggle-panel-service.ts"));
__webpack_require__(/*! ./background-area.css */ "./React/lesson-conduction-panel/components/background-area.css");
class BackgroundArea extends react_1.default.Component {
    constructor(props) {
        super(props);
        this.state = {
            show: false
        };
        toggle_panel_service_1.default.registerBackgoundArea(this);
    }
    show() {
        this.setState({ show: true });
    }
    hide() {
        this.setState({ show: false });
    }
    get isShown() { return this.state.show; }
    render() {
        return (react_1.default.createElement("div", { className: "lcp-background " + (this.isShown ? "" : "lcp-bg-hide") }));
    }
}
exports["default"] = BackgroundArea;


/***/ }),

/***/ "./React/lesson-conduction-panel/enums/presence-status.ts":
/*!****************************************************************!*\
  !*** ./React/lesson-conduction-panel/enums/presence-status.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
var PresenceStatus;
(function (PresenceStatus) {
    PresenceStatus[PresenceStatus["Present"] = 0] = "Present";
    PresenceStatus[PresenceStatus["Absent"] = 1] = "Absent";
    PresenceStatus[PresenceStatus["Late"] = 2] = "Late";
})(PresenceStatus || (PresenceStatus = {}));
exports["default"] = PresenceStatus;


/***/ }),

/***/ "./React/lesson-conduction-panel/lesson-conduction-panel.tsx":
/*!*******************************************************************!*\
  !*** ./React/lesson-conduction-panel/lesson-conduction-panel.tsx ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const background_area_1 = __importDefault(__webpack_require__(/*! ./components/background-area */ "./React/lesson-conduction-panel/components/background-area.tsx"));
__webpack_require__(/*! ./lesson-conduction-panel.css */ "./React/lesson-conduction-panel/lesson-conduction-panel.css");
const panel_1 = __importDefault(__webpack_require__(/*! ./panel/panel */ "./React/lesson-conduction-panel/panel/panel.tsx"));
const store_service_1 = __importDefault(__webpack_require__(/*! ./services/store-service */ "./React/lesson-conduction-panel/services/store-service.ts"));
class LessonConductionPanel extends react_1.default.Component {
    constructor(props) {
        super(props);
        store_service_1.default.assignModel(props.model);
    }
    render() {
        return (react_1.default.createElement(react_1.default.Fragment, null,
            react_1.default.createElement(background_area_1.default, null),
            react_1.default.createElement(panel_1.default, null)));
    }
}
exports["default"] = LessonConductionPanel;


/***/ }),

/***/ "./React/lesson-conduction-panel/marks/mark-input.tsx":
/*!************************************************************!*\
  !*** ./React/lesson-conduction-panel/marks/mark-input.tsx ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const form_controls_1 = __webpack_require__(/*! ../../shared/form-controls */ "./React/shared/form-controls.ts");
class MarkInput extends react_1.default.Component {
    constructor() {
        super(...arguments);
        this.change = (value) => {
            if (!(value === null || value === void 0 ? void 0 : value.length))
                this.props.onChange(undefined);
            let mark = {};
            if (value.length >= 1) {
                const prefix = this.tryConvertMarkPrefix(value[0]);
                if (prefix) {
                    mark.prefix = prefix;
                    value = value.substring(1);
                }
            }
            if (value.length >= 1) {
                const markValue = this.tryConvertMarkValue(value[0]);
                if (markValue) {
                    mark.value = markValue;
                }
            }
            this.props.onChange(mark);
        };
    }
    render() {
        var _a, _b;
        return (react_1.default.createElement(form_controls_1.TextInput, { label: this.props.label, errorMessages: this.props.errorMessages, warningMessages: this.props.warningMessages, name: "mark-input", containerClassName: "mark-input-container " + (((_a = this.props.containerClassName) === null || _a === void 0 ? void 0 : _a.length) ? this.props.containerClassName : ""), inputClassName: "mark-input " + (((_b = this.props.inputClassName) === null || _b === void 0 ? void 0 : _b.length) ? this.props.inputClassName : ""), value: this._value, onChange: this.change }));
    }
    get _value() {
        var _a;
        if (!this.props.mark)
            return "";
        let value = (_a = this.props.mark.value) === null || _a === void 0 ? void 0 : _a.toString(), prefix = this.props.mark.prefix;
        value !== null && value !== void 0 ? value : (value = "");
        prefix !== null && prefix !== void 0 ? prefix : (prefix = "");
        return prefix + value;
    }
    tryConvertMarkPrefix(prefixText) {
        if (['-', '+'].includes(prefixText)) {
            return prefixText;
        }
        return undefined;
    }
    tryConvertMarkValue(markText) {
        const mark = parseInt(markText);
        if ([1, 2, 3, 4, 5, 6].includes(mark)) {
            return mark;
        }
        return undefined;
    }
}
exports["default"] = MarkInput;


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/components/anchor.tsx":
/*!*******************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/components/anchor.tsx ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const lesson_timer_service_1 = __importDefault(__webpack_require__(/*! ../../services/lesson-timer-service */ "./React/lesson-conduction-panel/services/lesson-timer-service.ts"));
const store_service_1 = __importDefault(__webpack_require__(/*! ../../services/store-service */ "./React/lesson-conduction-panel/services/store-service.ts"));
const toggle_panel_service_1 = __importDefault(__webpack_require__(/*! ../../services/toggle-panel-service */ "./React/lesson-conduction-panel/services/toggle-panel-service.ts"));
__webpack_require__(/*! ./anchor.css */ "./React/lesson-conduction-panel/panel/components/anchor.css");
class Anchor extends react_1.default.Component {
    constructor() {
        super(...arguments);
        this.click = () => {
            toggle_panel_service_1.default.toggle();
        };
    }
    render() {
        return (react_1.default.createElement("button", { className: "lcp-anchor", onClick: this.click },
            react_1.default.createElement("div", null,
                react_1.default.createElement("span", null, "Zaj\u0119cia"),
                this.timeComponent())));
    }
    timeComponent() {
        if (lesson_timer_service_1.default.isSetUp)
            return (react_1.default.createElement("span", null,
                lesson_timer_service_1.default.minutes,
                ":",
                this.displaySeconds(lesson_timer_service_1.default.seconds)));
        return react_1.default.createElement(react_1.default.Fragment, null);
    }
    displaySeconds(seconds) {
        if (seconds < 10)
            return '0' + seconds.toString();
        return seconds.toString();
    }
    componentDidMount() {
        if (!lesson_timer_service_1.default.isSetUp)
            lesson_timer_service_1.default.setUp(store_service_1.default.startTime, store_service_1.default.duration);
        lesson_timer_service_1.default.onUpdate(() => this.forceUpdate());
    }
}
exports["default"] = Anchor;


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/components/clock-components.tsx":
/*!*****************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/components/clock-components.tsx ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ClockColon = exports.ClockDigit = void 0;
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const ClockDigit = ({ digit }) => {
    return (react_1.default.createElement("div", { className: "lcp-clock-digit" }, digit));
};
exports.ClockDigit = ClockDigit;
const ClockColon = ({}) => {
    return (react_1.default.createElement("div", { className: "lcp-clock-colon" }, ":"));
};
exports.ClockColon = ClockColon;


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/components/clock.tsx":
/*!******************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/components/clock.tsx ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const lesson_timer_service_1 = __importDefault(__webpack_require__(/*! ../../services/lesson-timer-service */ "./React/lesson-conduction-panel/services/lesson-timer-service.ts"));
const clock_components_1 = __webpack_require__(/*! ./clock-components */ "./React/lesson-conduction-panel/panel/components/clock-components.tsx");
__webpack_require__(/*! ./clock.css */ "./React/lesson-conduction-panel/panel/components/clock.css");
class Clock extends react_1.default.Component {
    render() {
        if (!lesson_timer_service_1.default.isSetUp)
            return react_1.default.createElement(react_1.default.Fragment, null);
        this._digitKeyCounter = 0;
        return (react_1.default.createElement("div", { className: "lcp-clock" },
            this.toClockDigits(lesson_timer_service_1.default.seconds, 2),
            react_1.default.createElement(clock_components_1.ClockColon, { key: "colon" }),
            this.toClockDigits(lesson_timer_service_1.default.minutes)));
    }
    componentDidMount() {
        if (!lesson_timer_service_1.default.isSetUp)
            lesson_timer_service_1.default.setUp(this.props.startTime, this.props.duration);
        lesson_timer_service_1.default.onUpdate(() => this.forceUpdate());
    }
    toClockDigits(num, minDigits) {
        const digits = this.toDigitsIt(num);
        const comps = [];
        for (const digit of digits)
            comps.push(this.getClockDigit(digit));
        while (comps.length < minDigits)
            comps.push(this.getClockDigit(0));
        return comps;
    }
    getClockDigit(digit) {
        return (react_1.default.createElement(clock_components_1.ClockDigit, { key: this._digitKeyCounter++, digit: digit }));
    }
    *toDigitsIt(num) {
        while (num >= 1) {
            yield num % 10;
            num = Math.floor(num / 10);
        }
    }
}
exports["default"] = Clock;


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/components/controls.tsx":
/*!*********************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/components/controls.tsx ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const components_1 = __webpack_require__(/*! ../../../shared/components */ "./React/shared/components.ts");
const lesson_cond_panel_content_1 = __importDefault(__webpack_require__(/*! ../enums/lesson-cond-panel-content */ "./React/lesson-conduction-panel/panel/enums/lesson-cond-panel-content.ts"));
__webpack_require__(/*! ./controls.css */ "./React/lesson-conduction-panel/panel/components/controls.css");
class Controls extends react_1.default.Component {
    render() {
        return (react_1.default.createElement("div", { className: "lcp-controls-container" },
            react_1.default.createElement(BtnWrapper, null,
                react_1.default.createElement(components_1.IconLabelButton, { label: "Uzupe\u0142nij informacje o lekcji", faIcon: "fa-solid fa-circle-info", onClick: () => this.props.goTo(lesson_cond_panel_content_1.default.LessonDetailsEdit) })),
            react_1.default.createElement(BtnWrapper, null,
                react_1.default.createElement(components_1.IconLabelButton, { label: "Sprawd\u017A obecno\u015B\u0107", faIcon: "fa-solid fa-list-ol", onClick: () => this.props.goTo(lesson_cond_panel_content_1.default.AttendanceEdit) })),
            react_1.default.createElement(BtnWrapper, null,
                react_1.default.createElement(components_1.IconLabelButton, { label: "Wpisz ocen\u0119", faIcon: "fa-solid fa-highlighter", onClick: () => this.props.goTo(lesson_cond_panel_content_1.default.GivingMark) })),
            react_1.default.createElement(BtnWrapper, null,
                react_1.default.createElement(components_1.IconLabelButton, { label: "Wpisz oceny z pracy klasowej", faIcon: "fa-solid fa-arrows-down-to-people", onClick: () => this.props.goTo(lesson_cond_panel_content_1.default.GivingGroupMark) }))));
    }
}
exports["default"] = Controls;
const BtnWrapper = ({ children }) => (react_1.default.createElement("div", { className: "btn-container" }, children));


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/components/info-row.tsx":
/*!*********************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/components/info-row.tsx ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const store_service_1 = __importDefault(__webpack_require__(/*! ../../services/store-service */ "./React/lesson-conduction-panel/services/store-service.ts"));
__webpack_require__(/*! ./info-row.css */ "./React/lesson-conduction-panel/panel/components/info-row.css");
const save_button_1 = __importDefault(__webpack_require__(/*! ./save-button */ "./React/lesson-conduction-panel/panel/components/save-button.tsx"));
const InfoRow = (props) => {
    return (react_1.default.createElement("div", { className: "lcp-info-row" },
        react_1.default.createElement(save_button_1.default, null),
        react_1.default.createElement("div", { className: "lcp-info-row-text-info" },
            react_1.default.createElement("span", { className: "lcp-info-row-class-name" }, store_service_1.default.className),
            react_1.default.createElement("span", { className: "lcp-info-row-subject-name" }, store_service_1.default.subjectName))));
};
exports["default"] = InfoRow;


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/components/save-button.tsx":
/*!************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/components/save-button.tsx ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const components_1 = __webpack_require__(/*! ../../../shared/components */ "./React/shared/components.ts");
const save_button_service_1 = __importDefault(__webpack_require__(/*! ../../services/save-button-service */ "./React/lesson-conduction-panel/services/save-button-service.ts"));
__webpack_require__(/*! ./save-button.css */ "./React/lesson-conduction-panel/panel/components/save-button.css");
class SaveButton extends react_1.default.Component {
    constructor(props) {
        super(props);
        this.state = {
            shown: false
        };
        save_button_service_1.default.registerButton(this);
    }
    render() {
        return (react_1.default.createElement(components_1.ActionButton, { label: "Zapisz", onClick: this._click, className: "lcp-save-btn " + (!this.state.shown ? "lcp-save-btn-hidden" : "") }));
    }
    get _click() { return this.state.shown ? this.state.onClick : undefined; }
}
exports["default"] = SaveButton;


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/enums/lesson-cond-panel-content-container-state.ts":
/*!************************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/enums/lesson-cond-panel-content-container-state.ts ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
var LessonCondPanelContentContainerState;
(function (LessonCondPanelContentContainerState) {
    LessonCondPanelContentContainerState[LessonCondPanelContentContainerState["Visible"] = 0] = "Visible";
    LessonCondPanelContentContainerState[LessonCondPanelContentContainerState["ToHidden"] = 1] = "ToHidden";
    LessonCondPanelContentContainerState[LessonCondPanelContentContainerState["Hidden"] = 2] = "Hidden";
    LessonCondPanelContentContainerState[LessonCondPanelContentContainerState["ToVisible"] = 3] = "ToVisible";
})(LessonCondPanelContentContainerState || (LessonCondPanelContentContainerState = {}));
exports["default"] = LessonCondPanelContentContainerState;


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/enums/lesson-cond-panel-content.ts":
/*!********************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/enums/lesson-cond-panel-content.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
var LessonCondPanelContent;
(function (LessonCondPanelContent) {
    LessonCondPanelContent[LessonCondPanelContent["LessonDetailsEdit"] = 0] = "LessonDetailsEdit";
    LessonCondPanelContent[LessonCondPanelContent["AttendanceEdit"] = 1] = "AttendanceEdit";
    LessonCondPanelContent[LessonCondPanelContent["GivingMark"] = 2] = "GivingMark";
    LessonCondPanelContent[LessonCondPanelContent["GivingGroupMark"] = 3] = "GivingGroupMark";
})(LessonCondPanelContent || (LessonCondPanelContent = {}));
exports["default"] = LessonCondPanelContent;


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel-content-area/attendance-edition/attendance-edition.tsx":
/*!**********************************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel-content-area/attendance-edition/attendance-edition.tsx ***!
  \**********************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const server_1 = __importDefault(__webpack_require__(/*! ../../../../scheduled-lessons-list/server */ "./React/scheduled-lessons-list/server.ts"));
const mod_comp_base_1 = __importDefault(__webpack_require__(/*! ../../../../shared/form-controls/mod-comp-base */ "./React/shared/form-controls/mod-comp-base.tsx"));
const save_button_service_1 = __importDefault(__webpack_require__(/*! ../../../services/save-button-service */ "./React/lesson-conduction-panel/services/save-button-service.ts"));
const store_service_1 = __importDefault(__webpack_require__(/*! ../../../services/store-service */ "./React/lesson-conduction-panel/services/store-service.ts"));
__webpack_require__(/*! ./attendance-edition.css */ "./React/lesson-conduction-panel/panel/panel-content-area/attendance-edition/attendance-edition.css");
const attendance_entry_1 = __importDefault(__webpack_require__(/*! ./attendance-entry */ "./React/lesson-conduction-panel/panel/panel-content-area/attendance-edition/attendance-entry.tsx"));
class AttendanceEdition extends mod_comp_base_1.default {
    constructor(props) {
        super(props);
        this.onPresenceSelected = (studentId, presence) => {
            this.setStateFnData(data => {
                const student = data.students.find(x => x.id == studentId);
                if (student)
                    student.presence = presence;
            });
        };
        this.submitAsync = () => __awaiter(this, void 0, void 0, function* () {
            const res = yield server_1.default.postAsync("Attendance", {}, this.state.data);
            // TODO: handle server errors
            if (res.success) {
                store_service_1.default.lessonDetailsSvc.applyToMain();
                save_button_service_1.default.hide();
            }
            else
                console.debug(res.message);
        });
        this.state = {
            data: store_service_1.default.attendanceSvc.model
        };
        save_button_service_1.default.setAction(this.submitAsync);
    }
    render() {
        return (react_1.default.createElement("div", { className: "attendance-edition-list" }, store_service_1.default.students.map((student, index) => {
            var _a;
            let { presence } = student, rest = __rest(student, ["presence"]);
            presence = (_a = this.state.data.students.at(index)) === null || _a === void 0 ? void 0 : _a.presence;
            return (react_1.default.createElement(attendance_entry_1.default, Object.assign({ key: student.id, selectPresence: this.onPresenceSelected, presence: presence }, rest)));
        })));
    }
    componentWillUpdate() {
        store_service_1.default.attendanceSvc.update(this.state.data);
        save_button_service_1.default.change(store_service_1.default.attendanceSvc.anyChangesToMainModel());
    }
}
exports["default"] = AttendanceEdition;


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel-content-area/attendance-edition/attendance-entry.tsx":
/*!********************************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel-content-area/attendance-edition/attendance-entry.tsx ***!
  \********************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const presence_status_1 = __importDefault(__webpack_require__(/*! ../../../enums/presence-status */ "./React/lesson-conduction-panel/enums/presence-status.ts"));
__webpack_require__(/*! ./attendance-entry.css */ "./React/lesson-conduction-panel/panel/panel-content-area/attendance-edition/attendance-entry.css");
class AttendanceEntry extends react_1.default.Component {
    constructor() {
        super(...arguments);
        this.SELECTED_PRESENCE = "selected-presence";
        this.NOT_SELECTED_PRESENCE = "not-selected-presence";
        this.NONE_PRESENCE_SELECTED = "none-presence-selected";
    }
    render() {
        return (react_1.default.createElement("div", { className: "attendance-entry" },
            react_1.default.createElement("span", null, this.props.numberInJournal),
            react_1.default.createElement("span", null,
                this.props.lastName,
                " ",
                this.props.firstName),
            react_1.default.createElement("div", { className: "presence-options" },
                react_1.default.createElement("a", { role: "button", className: this.getPresenceClassFor(presence_status_1.default.Present), onClick: () => this.props.selectPresence(this.props.id, presence_status_1.default.Present) }, "Obecny"),
                react_1.default.createElement("a", { role: "button", className: this.getPresenceClassFor(presence_status_1.default.Absent), onClick: () => this.props.selectPresence(this.props.id, presence_status_1.default.Absent) }, "Nieobecny"),
                react_1.default.createElement("a", { role: "button", className: this.getPresenceClassFor(presence_status_1.default.Late), onClick: () => this.props.selectPresence(this.props.id, presence_status_1.default.Late) }, "Sp\u00F3\u017Aniony"))));
    }
    getPresenceClassFor(presence) {
        if (this.props.presence == undefined
            || this.props.presence == null)
            return this.NONE_PRESENCE_SELECTED;
        if (this.props.presence == presence)
            return this.SELECTED_PRESENCE;
        return this.NOT_SELECTED_PRESENCE;
    }
}
exports["default"] = AttendanceEntry;


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel-content-area/giving-group-mark-page/giving-group-mark-page.tsx":
/*!******************************************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel-content-area/giving-group-mark-page/giving-group-mark-page.tsx ***!
  \******************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const form_controls_1 = __webpack_require__(/*! ../../../../shared/form-controls */ "./React/shared/form-controls.ts");
const mod_comp_base_1 = __importDefault(__webpack_require__(/*! ../../../../shared/form-controls/mod-comp-base */ "./React/shared/form-controls/mod-comp-base.tsx"));
const store_service_1 = __importDefault(__webpack_require__(/*! ../../../services/store-service */ "./React/lesson-conduction-panel/services/store-service.ts"));
const student_mark_insertion_entry_1 = __importDefault(__webpack_require__(/*! ./student-mark-insertion-entry */ "./React/lesson-conduction-panel/panel/panel-content-area/giving-group-mark-page/student-mark-insertion-entry.tsx"));
__webpack_require__(/*! ./giving-group-mark-page.css */ "./React/lesson-conduction-panel/panel/panel-content-area/giving-group-mark-page/giving-group-mark-page.css");
const save_button_service_1 = __importDefault(__webpack_require__(/*! ../../../services/save-button-service */ "./React/lesson-conduction-panel/services/save-button-service.ts"));
const server_1 = __importDefault(__webpack_require__(/*! ../../../../scheduled-lessons-list/server */ "./React/scheduled-lessons-list/server.ts"));
class GivingGroupMarkPage extends mod_comp_base_1.default {
    constructor(props) {
        super(props);
        this.submitAsync = () => __awaiter(this, void 0, void 0, function* () {
            if (!this._validator.validate()) {
                this.forceUpdate();
                return;
            }
            const _a = this.state.data, { marks } = _a, rest = __rest(_a, ["marks"]);
            const res = yield server_1.default.postAsync("GroupMark", {}, Object.assign(Object.assign({}, rest), { marks: Object.keys(marks).map(id => ({
                    studentId: id,
                    mark: marks[id]
                })) }));
            if (res.success) {
                this.setState({
                    data: {
                        lessonId: this.state.data.lessonId,
                        description: "",
                        marks: {}
                    }
                });
            }
        });
        this.changeWeight = (value) => {
            if (!value) {
                this.setStateFnData(data => data.weight = undefined);
                return;
            }
            const int = parseInt(value);
            if (int)
                this.setStateFnData(data => data.weight = int);
        };
        this.state = {
            data: {
                lessonId: store_service_1.default.lessonId,
                description: '',
                marks: {}
            }
        };
        this._validator.setRules({
            description: {
                notNull: true, notEmpty: 'Należy wprowadzić opis oceny'
            },
            marks: {
                other: (model, on) => {
                    // TODO: validate marks
                    return undefined;
                }
            },
            weight: {
                other: (model, on) => {
                    // TODO: validated weight
                    return undefined;
                }
            }
        });
        save_button_service_1.default.show();
        save_button_service_1.default.setAction(this.submitAsync);
    }
    render() {
        return (react_1.default.createElement("form", { className: "giving-group-mark-page" },
            react_1.default.createElement("div", { className: "giving-group-mark-details" },
                react_1.default.createElement(form_controls_1.TextArea, { label: "Opis", name: "description-input", value: this.state.data.description, onChange: value => this.setStateFnData(data => data.description = value), errorMessages: this._validator.getErrorMsgsFor('description'), warningMessages: this._validator.getWarningMsgsFor('description'), inputClassName: "description-input" }),
                react_1.default.createElement(form_controls_1.Input, { label: "Waga", name: "weight-input", type: "number", value: this.state.data.weight, onChangeV: this.changeWeight, warningMessages: this._validator.getWarningMsgsFor('weight'), containerClassName: "weight-input-container", inputClassName: "weight-input" })),
            react_1.default.createElement("div", { className: "student-mark-insertion-list" }, store_service_1.default.students.map(student => (react_1.default.createElement(student_mark_insertion_entry_1.default, Object.assign({ key: student.id, mark: this.state.data.marks[student.id], onChange: mark => this.setStateFnData(data => data.marks[student.id] = mark) }, student)))))));
    }
}
exports["default"] = GivingGroupMarkPage;


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel-content-area/giving-group-mark-page/student-mark-insertion-entry.tsx":
/*!************************************************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel-content-area/giving-group-mark-page/student-mark-insertion-entry.tsx ***!
  \************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const mark_input_1 = __importDefault(__webpack_require__(/*! ../../../marks/mark-input */ "./React/lesson-conduction-panel/marks/mark-input.tsx"));
__webpack_require__(/*! ./student-mark-insertion-entry.css */ "./React/lesson-conduction-panel/panel/panel-content-area/giving-group-mark-page/student-mark-insertion-entry.css");
class StudentMarkInsertionEntry extends react_1.default.Component {
    render() {
        return (react_1.default.createElement("div", { className: "student-mark-insertion-entry " + (this._insertedMark ? "student-mark-insertion-entry-inserted" : "") },
            react_1.default.createElement("span", null, this.props.numberInJournal),
            react_1.default.createElement("span", null,
                this.props.lastName,
                " ",
                this.props.firstName),
            react_1.default.createElement(mark_input_1.default, { mark: this.props.mark, onChange: this.props.onChange, containerClassName: "student-mark-insertion-input-container", inputClassName: "student-mark-insertion-input" })));
    }
    get _insertedMark() { var _a; return ((_a = this.props.mark) === null || _a === void 0 ? void 0 : _a.value) != undefined; }
}
exports["default"] = StudentMarkInsertionEntry;


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel-content-area/giving-mark-page/giving-mark-page.tsx":
/*!******************************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel-content-area/giving-mark-page/giving-mark-page.tsx ***!
  \******************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const mod_comp_base_1 = __importDefault(__webpack_require__(/*! ../../../../shared/form-controls/mod-comp-base */ "./React/shared/form-controls/mod-comp-base.tsx"));
const mark_input_1 = __importDefault(__webpack_require__(/*! ../../../marks/mark-input */ "./React/lesson-conduction-panel/marks/mark-input.tsx"));
const store_service_1 = __importDefault(__webpack_require__(/*! ../../../services/store-service */ "./React/lesson-conduction-panel/services/store-service.ts"));
const student_selection_entry_1 = __importDefault(__webpack_require__(/*! ./student-selection-entry */ "./React/lesson-conduction-panel/panel/panel-content-area/giving-mark-page/student-selection-entry.tsx"));
__webpack_require__(/*! ./giving-mark-page.css */ "./React/lesson-conduction-panel/panel/panel-content-area/giving-mark-page/giving-mark-page.css");
const form_controls_1 = __webpack_require__(/*! ../../../../shared/form-controls */ "./React/shared/form-controls.ts");
const save_button_service_1 = __importDefault(__webpack_require__(/*! ../../../services/save-button-service */ "./React/lesson-conduction-panel/services/save-button-service.ts"));
const server_1 = __importDefault(__webpack_require__(/*! ../../../../scheduled-lessons-list/server */ "./React/scheduled-lessons-list/server.ts"));
class GivingMarkPage extends mod_comp_base_1.default {
    constructor(props) {
        super(props);
        this.submitAsync = () => __awaiter(this, void 0, void 0, function* () {
            if (!this._validator.validate()) {
                this.forceUpdate();
                return;
            }
            const res = yield server_1.default.postAsync("Mark", {}, this.state.data);
            if (res.success) {
                this.setState({
                    data: {
                        lessonId: this.state.data.lessonId,
                        description: "",
                        mark: undefined,
                        studentId: undefined,
                        weight: undefined
                    }
                });
            }
        });
        this.changeWeight = (value) => {
            if (!value) {
                this.setStateFnData(data => data.weight = undefined);
                return;
            }
            const int = parseInt(value);
            if (int)
                this.setStateFnData(data => data.weight = int);
        };
        this.state = {
            data: {
                lessonId: store_service_1.default.lessonId,
                description: ""
            }
        };
        this._validator.setRules({
            description: {
                notNull: true, notEmpty: 'Należy wprowadzić opis oceny'
            },
            mark: {
                notNull: 'Należy podać ocenę',
                other: (model, on) => {
                    if (!model[on].value)
                        return {
                            error: 'Należy podać ocenę',
                            on
                        };
                    return undefined;
                }
            },
            studentId: {
                notNull: true
            },
            weight: {
                other: (model, on) => {
                    // TODO: validate weight
                    return undefined;
                }
            }
        });
        save_button_service_1.default.show();
        save_button_service_1.default.setAction(this.submitAsync);
    }
    render() {
        return (react_1.default.createElement("form", { className: "giving-mark-page", onSubmit: this.submitAsync },
            react_1.default.createElement("div", { className: "giving-mark-details" },
                react_1.default.createElement("div", { className: "giving-mark-details-first-row" },
                    react_1.default.createElement(mark_input_1.default, { label: "Ocena", mark: this.state.data.mark, onChange: mark => this.setStateFnData(data => data.mark = mark), errorMessages: this._validator.getErrorMsgsFor('mark'), warningMessages: this._validator.getWarningMsgsFor('mark'), containerClassName: "one-mark-input" })),
                react_1.default.createElement(form_controls_1.TextArea, { label: "Opis", name: "description-input", value: this.state.data.description, onChange: value => this.setStateFnData(data => data.description = value), errorMessages: this._validator.getErrorMsgsFor('description'), warningMessages: this._validator.getWarningMsgsFor('description'), inputClassName: "description-input" }),
                react_1.default.createElement(form_controls_1.Input, { label: "Waga", name: "weight-input", type: "number", value: this.state.data.weight, onChangeV: this.changeWeight, warningMessages: this._validator.getWarningMsgsFor('weight'), containerClassName: "weight-input-container", inputClassName: "weight-input" })),
            react_1.default.createElement("div", { className: "student-selection-list" }, store_service_1.default.students.map(student => (react_1.default.createElement(student_selection_entry_1.default, Object.assign({ key: student.id, selected: this.state.data.studentId == student.id, select: studentId => this.setStateFnData(data => data.studentId = studentId) }, student)))))));
    }
}
exports["default"] = GivingMarkPage;


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel-content-area/giving-mark-page/student-selection-entry.tsx":
/*!*************************************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel-content-area/giving-mark-page/student-selection-entry.tsx ***!
  \*************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
__webpack_require__(/*! ./student-selection-entry.css */ "./React/lesson-conduction-panel/panel/panel-content-area/giving-mark-page/student-selection-entry.css");
class StudentSelectionEntry extends react_1.default.Component {
    render() {
        return (react_1.default.createElement("button", { className: "student-selection-entry " + (this.props.selected ? "student-selection-entry-selected" : ""), type: "button", onClick: () => this.props.select(this.props.id) },
            react_1.default.createElement("span", null, this.props.numberInJournal),
            react_1.default.createElement("span", null,
                this.props.lastName,
                " ",
                this.props.firstName)));
    }
}
exports["default"] = StudentSelectionEntry;


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel-content-area/lesson-details-edition/lesson-details-edition.tsx":
/*!******************************************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel-content-area/lesson-details-edition/lesson-details-edition.tsx ***!
  \******************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const server_1 = __importDefault(__webpack_require__(/*! ../../../../scheduled-lessons-list/server */ "./React/scheduled-lessons-list/server.ts"));
const form_controls_1 = __webpack_require__(/*! ../../../../shared/form-controls */ "./React/shared/form-controls.ts");
const mod_comp_base_1 = __importDefault(__webpack_require__(/*! ../../../../shared/form-controls/mod-comp-base */ "./React/shared/form-controls/mod-comp-base.tsx"));
const save_button_service_1 = __importDefault(__webpack_require__(/*! ../../../services/save-button-service */ "./React/lesson-conduction-panel/services/save-button-service.ts"));
const store_service_1 = __importDefault(__webpack_require__(/*! ../../../services/store-service */ "./React/lesson-conduction-panel/services/store-service.ts"));
class LessonDetailsEdition extends mod_comp_base_1.default {
    constructor(props) {
        super(props);
        this.submitAsync = () => __awaiter(this, void 0, void 0, function* () {
            if (!this._validator.validate()) {
                this.forceUpdate();
                return;
            }
            const res = yield server_1.default.postAsync("LessonDetails", {}, this.state.data);
            // TODO: handle server errors
            if (res.success) {
                store_service_1.default.lessonDetailsSvc.applyToMain();
                save_button_service_1.default.hide();
            }
            else
                console.debug(res.message);
        });
        this.changeTopic = (value) => {
            this.setStateFnData(data => data.topic = value);
        };
        const data = store_service_1.default.lessonDetailsSvc.model;
        this.state = {
            data
        };
        this._validator.setRules({
            topic: {
                notNull: true, notEmpty: 'Należy wprowadzić temat zajęć'
            }
        });
        save_button_service_1.default.setAction(this.submitAsync);
    }
    render() {
        return (react_1.default.createElement("form", null,
            react_1.default.createElement(form_controls_1.TextInput, { label: "Temat zaj\u0119\u0107", name: "topic-input", onChange: this.changeTopic, errorMessages: this._validator.getErrorMsgsFor('topic'), value: this.state.data.topic })));
    }
    componentWillUpdate() {
        this.preRenderOperations();
    }
    preRenderOperations() {
        store_service_1.default.lessonDetailsSvc.update(this.state.data);
        save_button_service_1.default.change(store_service_1.default.lessonDetailsSvc.anyChangesToMainModel());
    }
}
exports["default"] = LessonDetailsEdition;


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel-content-area/panel-content-area.tsx":
/*!***************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel-content-area/panel-content-area.tsx ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const lesson_cond_panel_content_container_state_1 = __importDefault(__webpack_require__(/*! ../enums/lesson-cond-panel-content-container-state */ "./React/lesson-conduction-panel/panel/enums/lesson-cond-panel-content-container-state.ts"));
__webpack_require__(/*! ./panel-content-area.css */ "./React/lesson-conduction-panel/panel/panel-content-area/panel-content-area.css");
class PanelContentArea extends react_1.default.Component {
    constructor(props) {
        super(props);
        this.HIDDEN_CLASS = "lcp-content-area-hidden";
        this.finishedTransition = (event) => {
            // when hiding transition has finished
            if (this._containerState == lesson_cond_panel_content_container_state_1.default.ToHidden) {
                this._containerState = lesson_cond_panel_content_container_state_1.default.Hidden;
                this._children = this.props.children;
                setTimeout(() => {
                    this._containerState = lesson_cond_panel_content_container_state_1.default.ToVisible;
                    this._container.classList.remove(this.HIDDEN_CLASS);
                });
                this.forceUpdate();
                return;
            }
        };
        this._children = props.children;
        this._containerState = lesson_cond_panel_content_container_state_1.default.Visible;
    }
    render() {
        return (react_1.default.createElement("div", { className: "lcp-content-area", ref: ref => this._container = ref, onTransitionEnd: this.finishedTransition }, this._children));
    }
    shouldComponentUpdate(nextProps) {
        // when received new children
        if (this._children != nextProps.children) {
            setTimeout(() => {
                this._containerState = lesson_cond_panel_content_container_state_1.default.ToHidden;
                this._container.classList.add(this.HIDDEN_CLASS);
            });
            return false;
        }
        return false;
    }
}
exports["default"] = PanelContentArea;


/***/ }),

/***/ "./React/lesson-conduction-panel/panel/panel.tsx":
/*!*******************************************************!*\
  !*** ./React/lesson-conduction-panel/panel/panel.tsx ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const enum_help_1 = __webpack_require__(/*! ../../shared/enum-help */ "./React/shared/enum-help.ts");
const store_service_1 = __importDefault(__webpack_require__(/*! ../services/store-service */ "./React/lesson-conduction-panel/services/store-service.ts"));
const toggle_panel_service_1 = __importDefault(__webpack_require__(/*! ../services/toggle-panel-service */ "./React/lesson-conduction-panel/services/toggle-panel-service.ts"));
const anchor_1 = __importDefault(__webpack_require__(/*! ./components/anchor */ "./React/lesson-conduction-panel/panel/components/anchor.tsx"));
const clock_1 = __importDefault(__webpack_require__(/*! ./components/clock */ "./React/lesson-conduction-panel/panel/components/clock.tsx"));
const controls_1 = __importDefault(__webpack_require__(/*! ./components/controls */ "./React/lesson-conduction-panel/panel/components/controls.tsx"));
const info_row_1 = __importDefault(__webpack_require__(/*! ./components/info-row */ "./React/lesson-conduction-panel/panel/components/info-row.tsx"));
const lesson_cond_panel_content_1 = __importDefault(__webpack_require__(/*! ./enums/lesson-cond-panel-content */ "./React/lesson-conduction-panel/panel/enums/lesson-cond-panel-content.ts"));
const attendance_edition_1 = __importDefault(__webpack_require__(/*! ./panel-content-area/attendance-edition/attendance-edition */ "./React/lesson-conduction-panel/panel/panel-content-area/attendance-edition/attendance-edition.tsx"));
const giving_group_mark_page_1 = __importDefault(__webpack_require__(/*! ./panel-content-area/giving-group-mark-page/giving-group-mark-page */ "./React/lesson-conduction-panel/panel/panel-content-area/giving-group-mark-page/giving-group-mark-page.tsx"));
const giving_mark_page_1 = __importDefault(__webpack_require__(/*! ./panel-content-area/giving-mark-page/giving-mark-page */ "./React/lesson-conduction-panel/panel/panel-content-area/giving-mark-page/giving-mark-page.tsx"));
const lesson_details_edition_1 = __importDefault(__webpack_require__(/*! ./panel-content-area/lesson-details-edition/lesson-details-edition */ "./React/lesson-conduction-panel/panel/panel-content-area/lesson-details-edition/lesson-details-edition.tsx"));
const panel_content_area_1 = __importDefault(__webpack_require__(/*! ./panel-content-area/panel-content-area */ "./React/lesson-conduction-panel/panel/panel-content-area/panel-content-area.tsx"));
__webpack_require__(/*! ./panel.css */ "./React/lesson-conduction-panel/panel/panel.css");
class Panel extends react_1.default.Component {
    constructor(props) {
        super(props);
        this.changeContent = (content) => {
            if (this.state.contentType == content)
                return;
            this.setState({ contentType: content });
        };
        this._contentPages = {};
        this.createLessonDetailsEdition = () => react_1.default.createElement(lesson_details_edition_1.default, { key: "lesson-details" });
        this.createAttendanceEdition = () => react_1.default.createElement(attendance_edition_1.default, { key: "attendance" });
        this.createGivingMarkPage = () => react_1.default.createElement(giving_mark_page_1.default, { key: "giving-mark" });
        this.createGivingGroupMarkPage = () => react_1.default.createElement(giving_group_mark_page_1.default, { key: "giving-group-mark" });
        this.state = {
            show: false,
            contentType: lesson_cond_panel_content_1.default.LessonDetailsEdit
        };
        toggle_panel_service_1.default.registerPanel(this);
    }
    show() {
        this.setState({ show: true });
    }
    hide() {
        this.setState({ show: false });
    }
    get isShown() { return this.state.show; }
    render() {
        return (react_1.default.createElement("div", { className: "lcp-panel-container " + (this.isShown ? "" : "lcp-panel-container-hide") },
            react_1.default.createElement("div", { className: "lcp-panel" },
                react_1.default.createElement("div", { className: "lcp-panel-top" },
                    react_1.default.createElement(clock_1.default, { startTime: this._startTime, duration: this._duration }),
                    react_1.default.createElement("div", { className: "lcp-panel-top-left" },
                        react_1.default.createElement(controls_1.default, { goTo: this.changeContent }),
                        react_1.default.createElement(info_row_1.default, null))),
                react_1.default.createElement(panel_content_area_1.default, null, this.getContentPage())),
            react_1.default.createElement(anchor_1.default, null)));
    }
    get _startTime() { return store_service_1.default.startTime; }
    get _duration() { return store_service_1.default.duration; }
    getContentPage() {
        if (!this._contentPages[this.state.contentType]) {
            this._contentPages[this.state.contentType] =
                (0, enum_help_1.enumAssignSwitch)(lesson_cond_panel_content_1.default, this.state.contentType, {
                    LessonDetailsEdit: this.createLessonDetailsEdition,
                    AttendanceEdit: this.createAttendanceEdition,
                    GivingMark: this.createGivingMarkPage,
                    GivingGroupMark: this.createGivingGroupMarkPage,
                    _: react_1.default.createElement(react_1.default.Fragment, null)
                });
        }
        return this._contentPages[this.state.contentType];
    }
}
exports["default"] = Panel;


/***/ }),

/***/ "./React/lesson-conduction-panel/services/lesson-timer-service.ts":
/*!************************************************************************!*\
  !*** ./React/lesson-conduction-panel/services/lesson-timer-service.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
class LessonTimerServiceImplementation {
    constructor() {
        this._isSetUp = false;
        this._listeners = new Set;
    }
    get isSetUp() { return this._isSetUp; }
    get minutes() {
        var _a;
        return Math.floor(((_a = this._leftSec) !== null && _a !== void 0 ? _a : 0) / 60);
    }
    get seconds() {
        var _a;
        return ((_a = this._leftSec) !== null && _a !== void 0 ? _a : 0) % 60;
    }
    setUp(startTime, durationMin) {
        let endTime = new Date(startTime.getTime());
        endTime.setMinutes(endTime.getMinutes() + durationMin);
        this._endTimeSec = endTime.getTime() / 1000;
        this._durationSec = durationMin * 60;
        this._isSetUp = true;
        this.setInterval();
    }
    setInterval() {
        if (this._intervalId)
            clearInterval(this._intervalId);
        this._intervalId = setInterval(() => {
            this.update();
        }, 1000);
    }
    onUpdate(listener) {
        if (!this._listeners.has(listener))
            this._listeners.add(listener);
    }
    update() {
        this.calculateLeftSeconds();
        this.callListeners();
    }
    calculateLeftSeconds() {
        this._leftSec = Math.floor(this._endTimeSec - new Date().getTime() / 1000);
        if (this._leftSec > this._durationSec)
            this._leftSec = this._durationSec;
        if (this._leftSec < 0)
            this._leftSec = 0;
    }
    callListeners() {
        for (const listener of this._listeners)
            listener === null || listener === void 0 ? void 0 : listener();
    }
}
const LessonTimerService = new LessonTimerServiceImplementation;
exports["default"] = LessonTimerService;


/***/ }),

/***/ "./React/lesson-conduction-panel/services/save-button-service.ts":
/*!***********************************************************************!*\
  !*** ./React/lesson-conduction-panel/services/save-button-service.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
class SaveButtonServiceImplementance {
    registerButton(button) {
        this._button = button;
    }
    change(show) {
        if (show)
            this.show();
        else
            this.hide();
    }
    show() {
        var _a;
        (_a = this._button) === null || _a === void 0 ? void 0 : _a.setState({ shown: true });
    }
    hide() {
        var _a;
        (_a = this._button) === null || _a === void 0 ? void 0 : _a.setState({ shown: false });
    }
    get isShown() {
        return this._button.state.shown;
    }
    setAction(action) {
        var _a;
        (_a = this._button) === null || _a === void 0 ? void 0 : _a.setState({ onClick: action });
    }
    clearAction() {
        var _a;
        (_a = this._button) === null || _a === void 0 ? void 0 : _a.setState({ onClick: undefined });
    }
}
const SaveButtonService = new SaveButtonServiceImplementance;
exports["default"] = SaveButtonService;


/***/ }),

/***/ "./React/lesson-conduction-panel/services/store-service-help/attendance-store-service.ts":
/*!***********************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/services/store-service-help/attendance-store-service.ts ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const base_specific_store_service_1 = __importDefault(__webpack_require__(/*! ./base-specific-store-service */ "./React/lesson-conduction-panel/services/store-service-help/base-specific-store-service.ts"));
class AttendanceStoreService extends base_specific_store_service_1.default {
    constructor(getMainModel) {
        super(getMainModel);
    }
    anyChangesToMainModel() {
        if (!this.areMainAndSpecificModelPresent())
            return false;
        const main = this._getMainModel();
        let diff = main.students.some(x => {
            const inModel = this._model.students.find(y => y.id == x.id);
            return (inModel === null || inModel === void 0 ? void 0 : inModel.presence) != x.presence;
        });
        return diff;
    }
    applyToMain() {
        var _a;
        const main = this._getMainModel();
        for (const student of main.students) {
            student.presence = (_a = this._model.students.find(x => x.id == student.id)) === null || _a === void 0 ? void 0 : _a.presence;
        }
    }
    get _defaultModel() {
        const main = this._getMainModel();
        return {
            id: main.lessonId,
            students: main.students.map(x => ({
                id: x.id,
                presence: x.presence
            }))
        };
    }
}
exports["default"] = AttendanceStoreService;


/***/ }),

/***/ "./React/lesson-conduction-panel/services/store-service-help/base-specific-store-service.ts":
/*!**************************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/services/store-service-help/base-specific-store-service.ts ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
class BaseSpecificStoreService {
    constructor(_getMainModel) {
        this._getMainModel = _getMainModel;
    }
    get model() {
        var _a;
        (_a = this._model) !== null && _a !== void 0 ? _a : (this._model = this._defaultModel);
        return this._model;
    }
    update(model) {
        this._model = model;
    }
    abortChanges() {
        this._model = undefined;
    }
    areMainAndSpecificModelPresent() {
        const main = this._mainModel;
        return main != undefined && this._model != undefined;
    }
    get _mainModel() { return this._getMainModel(); }
}
exports["default"] = BaseSpecificStoreService;


/***/ }),

/***/ "./React/lesson-conduction-panel/services/store-service-help/lesson-details-store-service.ts":
/*!***************************************************************************************************!*\
  !*** ./React/lesson-conduction-panel/services/store-service-help/lesson-details-store-service.ts ***!
  \***************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const base_specific_store_service_1 = __importDefault(__webpack_require__(/*! ./base-specific-store-service */ "./React/lesson-conduction-panel/services/store-service-help/base-specific-store-service.ts"));
class LessonDetailsStoreService extends base_specific_store_service_1.default {
    constructor(getMainModel) {
        super(getMainModel);
    }
    get _defaultModel() {
        var _a;
        const main = this._mainModel;
        return {
            id: main.lessonId,
            topic: (_a = main.topic) !== null && _a !== void 0 ? _a : ""
        };
    }
    anyChangesToMainModel() {
        if (!this.areMainAndSpecificModelPresent())
            return false;
        const main = this._getMainModel();
        let diff = main.topic != this._model.topic;
        return diff;
    }
    applyToMain() {
        if (!this.areMainAndSpecificModelPresent())
            return;
        this._mainModel.topic = this._model.topic;
        this._model = undefined;
    }
}
exports["default"] = LessonDetailsStoreService;


/***/ }),

/***/ "./React/lesson-conduction-panel/services/store-service.ts":
/*!*****************************************************************!*\
  !*** ./React/lesson-conduction-panel/services/store-service.ts ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const attendance_store_service_1 = __importDefault(__webpack_require__(/*! ./store-service-help/attendance-store-service */ "./React/lesson-conduction-panel/services/store-service-help/attendance-store-service.ts"));
const lesson_details_store_service_1 = __importDefault(__webpack_require__(/*! ./store-service-help/lesson-details-store-service */ "./React/lesson-conduction-panel/services/store-service-help/lesson-details-store-service.ts"));
class StoreServiceImplementation {
    constructor() {
        this._lessonDetailsSvc = new lesson_details_store_service_1.default(() => this._model);
        this._attendanceSvc = new attendance_store_service_1.default(() => this._model);
    }
    assignModel(model) {
        this._model = model;
    }
    get students() { var _a; return (_a = this._model) === null || _a === void 0 ? void 0 : _a.students; }
    get startTime() {
        var _a, _b;
        (_a = this._startTimeBackingField) !== null && _a !== void 0 ? _a : (this._startTimeBackingField = new Date((_b = this._model) === null || _b === void 0 ? void 0 : _b.startTimeTk));
        return this._startTimeBackingField;
    }
    get lessonId() { var _a; return (_a = this._model) === null || _a === void 0 ? void 0 : _a.lessonId; }
    get duration() { var _a; return (_a = this._model) === null || _a === void 0 ? void 0 : _a.duration; }
    get topic() { var _a; return (_a = this._model) === null || _a === void 0 ? void 0 : _a.topic; }
    get className() { var _a; return (_a = this._model) === null || _a === void 0 ? void 0 : _a.className; }
    get subjectName() { var _a; return (_a = this._model) === null || _a === void 0 ? void 0 : _a.subjectName; }
    get lessonDetailsSvc() { return this._lessonDetailsSvc; }
    get attendanceSvc() { return this._attendanceSvc; }
}
const StoreService = new StoreServiceImplementation;
exports["default"] = StoreService;


/***/ }),

/***/ "./React/lesson-conduction-panel/services/toggle-panel-service.ts":
/*!************************************************************************!*\
  !*** ./React/lesson-conduction-panel/services/toggle-panel-service.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
class TogglePanelServiceImplementation {
    registerBackgoundArea(component) {
        this._backgroundArea = component;
    }
    registerPanel(component) {
        this._panel = component;
    }
    toggle() {
        if (this._panel.isShown) {
            this._panel.hide();
            this._backgroundArea.hide();
        }
        else {
            this._panel.show();
            this._backgroundArea.show();
        }
    }
}
const TogglePanelService = new TogglePanelServiceImplementation;
exports["default"] = TogglePanelService;


/***/ }),

/***/ "./React/scheduled-lessons-list/server.ts":
/*!************************************************!*\
  !*** ./React/scheduled-lessons-list/server.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const server_connection_1 = __importDefault(__webpack_require__(/*! ../shared/server-connection */ "./React/shared/server-connection.tsx"));
const server = new server_connection_1.default("/ConductingClasses/ScheduledLessons");
exports["default"] = server;


/***/ }),

/***/ "./React/shared/form-controls/mod-comp-base.tsx":
/*!******************************************************!*\
  !*** ./React/shared/form-controls/mod-comp-base.tsx ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const react_1 = __importDefault(__webpack_require__(/*! react */ "./node_modules/react/index.js"));
const validator_1 = __importDefault(__webpack_require__(/*! ../validator */ "./React/shared/validator.ts"));
class ModCompBase extends react_1.default.Component {
    constructor(props) {
        super(props);
        this._validator = new validator_1.default();
        this._validator.forModelGetter(() => this.state.data);
    }
    setStateFn(...modifyMethod) {
        this.setState(prevState => {
            const state = Object.assign({}, prevState);
            modifyMethod
                .forEach(method => method ? method(state) : undefined);
            return state;
        });
    }
    setStateFnData(modifyMethod) {
        this.setStateFn(state => modifyMethod(state.data));
    }
}
exports["default"] = ModCompBase;


/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendor","react_lib","shared"], () => (__webpack_exec__("./React/lesson-conduction-panel.ts")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=lesson_conduction_panel.bundle.js.map