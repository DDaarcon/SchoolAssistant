@model SchoolAssistant.Infrastructure.Models.ConductingClasses.ScheduledLessonsList.ScheduledLessonListModel

<tbody>
    @foreach (var item in Model.Items)
    {
        <tr id="@(item.StartTime == Model.IncomingAt ? "incoming-lesson" : "")" height="40px">
            <td>
                <span>@item.StartTime.ToString("ddd, HH:mm")</span>
            </td>
            <td>
                <span>@item.ClassName</span>
            </td>
            <td>
                <span>@item.SubjectName</span>
            </td>
            @if (item.HeldClasses is null)
            {
                <td></td>
                <td></td>
            } else
            {
                <td>
                    <span>@item.HeldClasses.Topic</span>
                </td>
                <td>
                    <span>@item.HeldClasses.AmountOfPresentStudents / @item.HeldClasses.AmountOfAllStudents</span>
                </td>
            }
            <td>
                @{
                    bool closeOrOngoing = item.StartTime == Model.IncomingAt 
                        && item.StartTime.AddMinutes(-Model.MinutessBeforeClose) <= DateTime.Now
                        && item.StartTime.AddMinutes(item.Duration) >= DateTime.Now;
                }
                @if (closeOrOngoing)
                {
                <button 
                    class="conduct-btn"
                >
                    Poprowadź zajęcia
                </button>
                }
                else if (item.HeldClasses is not null)
                {
                <button 
                    class="see-past-details-btn"
                >
                    Szczegóły
                </button>
                }
                else if (item.StartTime < DateTime.Now)
                {
                <button 
                    class="see-omitted-btn"
                >
                    Uzupełnij
                </button>
                }
                else
                {
                <button
                    class="see-upcomming-btn"
                >
                    Szczegóły nadchodzących
                </button>
                }
            </td>
        </tr>
    }
</tbody>
